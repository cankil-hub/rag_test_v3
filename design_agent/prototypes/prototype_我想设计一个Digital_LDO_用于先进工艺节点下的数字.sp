* Prototype: 该小信号等效电路为Coarse-Fine Dual-Loop Digital LDO (CFL-DLDO) 的简化模型。由于LDO为纯数字实现，传统模拟误差放大器跨导(gm_ea)和调整管跨导(gm_pass)等参数不适用。本模型通过一个**有效跨导(gm_eff_loop)**来表示整个数字控制环路（包括数字误差检测、数字控制器和数字调整管阵列）对输出电压的综合调节作用。数字调整管阵列的输出阻抗由**ro_dcp**表示。输出端连接负载电容CL和负载电阻RL。
* Requirement: 我想设计一个Digital LDO，用于先进工艺节点下的数字负载供电，要求快速瞬态响应
* Generated by RAG-Guided Circuit Generator

.title 该小信号等效电路为Coarse-Fine Dual-Loop Digital LDO (CFL-DLDO) 的简化模型。由于LDO为纯数字实现，传统模拟误差放大器跨导(gm_ea)和调整管跨导(gm_pass)等参数不适用。本模型通过一个**有效跨导(gm_eff_loop)**来表示整个数字控制环路（包括数字误差检测、数字控制器和数字调整管阵列）对输出电压的综合调节作用。数字调整管阵列的输出阻抗由**ro_dcp**表示。输出端连接负载电容CL和负载电阻RL。

* Circuit parameters
.param Vref_node=vref
.param Vout_node=vout
.param GND_node=gnd

* Input signal
VIN vin 0 DC 0.6 AC 1  * Reference/Input voltage

* Transconductance stages (VCCS)
Ggm_eff_loop vout gnd vref vout 100mS  * 有效跨导，代表整个数字控制环路（数字误差检测、控制器、数字调整管阵列）的综合调节能力。鉴于LDO为纯数字，传统gm_ea和gm_pass不适用，此为等效模型中的关键参数，反映其瞬态响应能力。100mS代表强有力的调节作用，以实现快速瞬态响应。

* Resistances
Rro_dcp vout gnd 100 Ohm  * 数字控制功率级（调整管阵列）的等效输出阻抗。代表了LDO在开环状态下或高频下调整管阵列的固有输出阻抗。此值是基于先进工艺节点下数字功率级的合理估计。
RRL vout gnd 5 Ohm  * 等效负载电阻，基于Doc 5中CFL-DLDO的200mA最大负载电流容量和典型1V输出电压估算 (Vout/Iload = 1V/200mA)。此值代表了LDO在满载工作条件下的等效负载。

* Capacitances
CCL vout gnd 0.6 nF  * 片上负载电容，参考Doc 3中OCL-LDO的典型值。CFL-DLDO作为片上解决方案，通常支持小容量片上电容。

* AC Analysis
.ac dec 100 1 100Meg

.control
run
plot vdb(vout) phase(vout)
let gain_db = vdb(vout)
let phase_deg = phase(vout) * 180 / pi
meas ac ugf when gain_db=0
meas ac pm find phase_deg when gain_db=0
print ugf pm
.endc

.end